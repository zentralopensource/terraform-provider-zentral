---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "zentral_probe_action Resource - terraform-provider-zentral"
subcategory: ""
description: |-
  The resource zentral_probe_action manages probe actions.
---

# zentral_probe_action (Resource)

The resource `zentral_probe_action` manages probe actions.

## Example Usage

```terraform
resource "zentral_probe_action" "revoke-certs" {
  name        = "Revoke certificates"
  description = "Post event serial number and date to HTTP certificate revocation endpoint."
  backend     = "HTTP_POST"
  http_post = {
    url = "https://www.example.com/api/certificates/revoke/"
    headers = [
      {
        name  = "Authorization"
        value = "Bearer ${var.bearer_token}"
      }
    ]
    cel_transformation = trimspace(<<-EOT
    {
      "serial_number": "machine_serial_number" in metadata ? metadata.machine_serial_number : null,
      "not_after": metadata.created_at
    }
    EOT
    )
  }
}

resource "zentral_probe" "dep-enrollment-revoke-certs" {
  name        = "DEP enrollment â†’ revoke certificates"
  description = "Trigger older certificates revocation on DEP device enrollment."
  active      = true
  action_ids  = [zentral_probe_action.revoke-certs.id]
  metadata_filters = [
    {
      event_types = ["enrollment_secret_verification"]
    }
  ]
  payload_filters = [
    [
      {
        attribute = "type"
        operator  = "IN"
        values = [
          "dep_enrollment",
        ]
      }
    ]
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `backend` (String) Action backend.
- `name` (String) Name of the action.

### Optional

- `description` (String) Description of the action.
- `http_post` (Attributes) HTTP Post backend parameters. (see [below for nested schema](#nestedatt--http_post))
- `slack_incoming_webhook` (Attributes) Slack incoming webhook backend parameters. (see [below for nested schema](#nestedatt--slack_incoming_webhook))

### Read-Only

- `id` (String) `ID` of the action.

<a id="nestedatt--http_post"></a>
### Nested Schema for `http_post`

Required:

- `url` (String) `URL`.

Optional:

- `cel_transformation` (String) CEL expression that is used to transform the event data. The input to the expression is a `Map` with two keys: `metadata` for the event metadata and `payload` for the event payload.
- `headers` (Attributes Set) A set of additional HTTP headers to add to the requests. (see [below for nested schema](#nestedatt--http_post--headers))
- `password` (String, Sensitive) Password for basic authentication.
- `username` (String) Username for basic authentication.

<a id="nestedatt--http_post--headers"></a>
### Nested Schema for `http_post.headers`

Required:

- `name` (String) Name of the HTTP header.
- `value` (String, Sensitive) Value of the HTTP header.



<a id="nestedatt--slack_incoming_webhook"></a>
### Nested Schema for `slack_incoming_webhook`

Required:

- `url` (String, Sensitive) `URL`.
