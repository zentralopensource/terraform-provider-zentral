---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "zentral_store Resource - terraform-provider-zentral"
subcategory: ""
description: |-
  The resource zentral_store manages stores.
---

# zentral_store (Resource)

The resource `zentral_store` manages stores.

## Example Usage

```terraform
resource "zentral_store" "http-minimal" {
  name    = "HTTP-minimal"
  backend = "Example of a minimal HTTP store backend"
  http = {
    endpoint_url = "https://www.example.com/post"
  }
}

resource "zentral_store" "http-full" {
  name          = "HTTP-Full"
  description   = "Example of a fully configured HTTP store backend"
  admin_console = false
  event_filters = {
    included_event_filters = [
      {
        # events with the `osquery` tag are included
        tags = ["osquery"]
      }
    ]
    excluded_event_filters = [
      {
        # `osquery_request` events are excluded
        # this filter takes precedence
        event_type = ["osquery_request"]
      }
    ]
  }
  backend = "HTTP"
  http = {
    endpoint_url = "https://www.example.com/post"
    username     = "yolo"
    password     = var.http_basic_auth_password
    headers = [
      { name = "X-Custom-Header"
      value = "Value" }
    ]
    concurrency     = 2
    request_timeout = 123
    max_retries     = 4
    verify_tls      = true
  }
}

resource "zentral_store" "splunk-minimal" {
  name        = "Splunk-minimal"
  description = "Example of a minimal Splunk store backend"
  backend     = "SPLUNK"
  splunk = {
    # HEC
    hec_url   = "https://www.example.com/services/collector/event"
    hec_token = var.splunk_hec_token
  }
}

resource "zentral_store" "splunk-full" {
  name                           = "Splunk-full"
  description                    = "Example of a fully configured Splunk store backend"
  admin_console                  = true
  events_url_authorized_role_ids = [6]
  backend                        = "SPLUNK"
  splunk = {
    # HEC
    hec_url   = "https://www.example.com/services/collector/event"
    hec_token = var.splunk_hec_token
    hec_extra_headers = [
      {
        name  = "X-Custom-HEC-Header"
        value = "HECHeaderValue"
      }
    ]
    hec_request_timeout           = 123
    hec_index                     = "CustomIndex"
    hec_source                    = "CustomSource"
    computer_name_as_host_sources = ["osquery", "munki"]
    custom_host_field             = "custom_host_field"
    serial_number_field           = "serial_number"
    batch_size                    = 50
    # Search links displayed in the Zentral admin console
    search_app_url = "https://www.example.com/search_app"
    # Search API used to fetch the events
    # and display them in the Zentral admin console
    search_url   = "https://www.example.com/search"
    search_token = var.splunk_search_token
    search_extra_headers = [
      {
        name  = "X-Custom-Search-Header"
        value = "SearchHeaderValue"
      }
    ]
    search_request_timeout = 234
    search_index           = "CustomIndex"
    search_source          = "CustomSource"
    # for HEC and Search API requests
    verify_tls = true
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `backend` (String) Store backend.
- `name` (String) Name of the store.

### Optional

- `admin_console` (Boolean) Controls wether the store is used in the Zentral admin console. Only one store can be used in the admin console. Defaults to `false`
- `description` (String) Description of the store.
- `event_filters` (Attributes) Used to filter the events sent to the store. By default, all the events are sent to the store. (see [below for nested schema](#nestedatt--event_filters))
- `events_url_authorized_role_ids` (Set of Number) The `ID`s of the roles authorized to see the links to the external event store.
- `http` (Attributes) HTTP backend parameters. (see [below for nested schema](#nestedatt--http))
- `kinesis` (Attributes) Kinesis backend parameters. (see [below for nested schema](#nestedatt--kinesis))
- `splunk` (Attributes) Splunk backend parameters. (see [below for nested schema](#nestedatt--splunk))

### Read-Only

- `id` (String) `ID` of the store (UUID).

<a id="nestedatt--event_filters"></a>
### Nested Schema for `event_filters`

Optional:

- `excluded_event_filters` (Attributes Set) Excluded event filters. (see [below for nested schema](#nestedatt--event_filters--excluded_event_filters))
- `included_event_filters` (Attributes Set) Included event filters. (see [below for nested schema](#nestedatt--event_filters--included_event_filters))

<a id="nestedatt--event_filters--excluded_event_filters"></a>
### Nested Schema for `event_filters.excluded_event_filters`

Optional:

- `event_type` (Set of String) Set of the event types of the events to exclude.
- `routing_key` (Set of String) Set of the routing keys of the events to exclude.
- `tags` (Set of String) Set of the tags of the events to exclude.


<a id="nestedatt--event_filters--included_event_filters"></a>
### Nested Schema for `event_filters.included_event_filters`

Optional:

- `event_type` (Set of String) Set of the event types of the events to include.
- `routing_key` (Set of String) Set of the routing keys of the events to include.
- `tags` (Set of String) Set of the tags of the events to include.



<a id="nestedatt--http"></a>
### Nested Schema for `http`

Required:

- `endpoint_url` (String) HTTP endpoint URL.

Optional:

- `concurrency` (Number) Number of threads used to post to the endpoints. Defaults to `1`.
- `headers` (Attributes Set) A set of additional HTTP headers to add to the POST requests. (see [below for nested schema](#nestedatt--http--headers))
- `max_retries` (Number) Number of retries after a failed request. Defaults to `3`.
- `password` (String, Sensitive) Password for basic authentication.
- `request_timeout` (Number) Request timeout in seconds. Defaults to `120` seconds.
- `username` (String) Username for basic authentication.
- `verify_tls` (Boolean) Controls whether the TLS certificates will be verified. Defaults to `true`.

<a id="nestedatt--http--headers"></a>
### Nested Schema for `http.headers`

Required:

- `name` (String) Name of the HTTP header.
- `value` (String, Sensitive) Value of the HTTP header.



<a id="nestedatt--kinesis"></a>
### Nested Schema for `kinesis`

Required:

- `region_name` (String) AWS region.
- `serialization_format` (String) Zentral event serialization format. Either `zentral` or `firehose_v1`.
- `stream` (String) Name of the Kinesis stream.

Optional:

- `assume_role_arn` (String) `ARN` of the AWS role to assume.
- `aws_access_key_id` (String) AWS access key ID.
- `aws_secret_access_key` (String) AWS secret access key.
- `batch_size` (Number) Number of events sent in a single request. Defaults to `1`. Must be between `1` and `500`.


<a id="nestedatt--splunk"></a>
### Nested Schema for `splunk`

Required:

- `hec_token` (String, Sensitive) HEC token.
- `hec_url` (String) HEC endpoint URL.

Optional:

- `batch_size` (Number) Number of events sent in a single request. Defaults to `1`. Must be between `1` and `100`.
- `computer_name_as_host_sources` (List of String) List of the preferred inventory sources for the events `computer_name` field.
- `custom_host_field` (String) Name of an optional field to copy the `host` field value to.
- `hec_extra_headers` (Attributes Set) A set of additional HTTP headers to add to the HEC requests. (see [below for nested schema](#nestedatt--splunk--hec_extra_headers))
- `hec_index` (String) HEC index. Usually enforced in the HEC configuration.
- `hec_request_timeout` (Number) HEC request timeout in seconds. Defaults to `300` seconds.
- `hec_source` (String) HEC source. Usually enforced in the HEC configuration.
- `search_app_url` (String) Base URL of the Splunk search application. Used to build the links to the Splunk instance displayed when browsing the events in the Zentral admin console.
- `search_extra_headers` (Attributes Set) A set of additional HTTP headers to add to the search API requests. (see [below for nested schema](#nestedatt--splunk--search_extra_headers))
- `search_index` (String) Index to use with the Search API.
- `search_request_timeout` (Number) Search API request timeout in seconds. Defaults to `300` seconds.
- `search_source` (String) Source to use with the Search API.
- `search_token` (String, Sensitive) Splunk API token. Used in combination with `search_url`.
- `search_url` (String) Splunk API base URL. Used in combination with `search_token` to fetch the events displayed in the Zentral admin console.
- `serial_number_field` (String) Name of the field to use for the events machine serial number. Defaults to `machine_serial_number`.
- `verify_tls` (Boolean) Controls whether the TLS certificates will be verified. Defaults to `true`.

<a id="nestedatt--splunk--hec_extra_headers"></a>
### Nested Schema for `splunk.hec_extra_headers`

Required:

- `name` (String) Name of the HTTP header.
- `value` (String, Sensitive) Value of the HTTP header.


<a id="nestedatt--splunk--search_extra_headers"></a>
### Nested Schema for `splunk.search_extra_headers`

Required:

- `name` (String) Name of the HTTP header.
- `value` (String, Sensitive) Value of the HTTP header.
